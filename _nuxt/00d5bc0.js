(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{461:function(e,t,n){var content=n(559);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(8).default)("5153cbd8",content,!0,{sourceMap:!1})},462:function(e,t,n){var content=n(561);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(8).default)("b40decec",content,!0,{sourceMap:!1})},558:function(e,t,n){"use strict";n(461)},559:function(e,t,n){var o=n(7)((function(i){return i[1]}));o.push([e.i,"h1[data-v-bc13c67a]{font-size:30px}h2[data-v-bc13c67a]{font-size:25px}h3[data-v-bc13c67a]{font-size:18px}h4[data-v-bc13c67a]{font-size:16px}.inp[data-v-bc13c67a]{accent-color:#2101c0;cursor:pointer;height:20px;width:20px}.inf[data-v-bc13c67a]{align-items:center;display:flex;height:25px;justify-content:center;width:25px}.ht[data-v-bc13c67a]{margin-top:1rem}.box[data-v-bc13c67a]{align-items:center;border:1px dotted;border-radius:10px;cursor:pointer;height:100px;justify-content:center;margin:5px 10px 0;width:200px}.box[data-v-bc13c67a],.row1[data-v-bc13c67a]{display:flex}.coll[data-v-bc13c67a]{width:30%}.coll[data-v-bc13c67a],.coll1[data-v-bc13c67a]{margin-left:10px}.coll1[data-v-bc13c67a]{width:15%}.boxes[data-v-bc13c67a]{border:1px dotted;border-radius:10px;height:550px;margin:2rem auto;padding:15px;position:relative;width:85%}.paid[data-v-bc13c67a]{align-items:center;display:flex;height:70px;justify-content:center;left:35%;position:absolute;top:25%;transform:rotateY(0deg) rotate(-45deg);width:170px}i[data-v-bc13c67a]{font-size:20px;margin-right:15px;margin-top:5px}.lines[data-v-bc13c67a],.lines1[data-v-bc13c67a]{display:flex;margin-top:8px}.lines1[data-v-bc13c67a]{justify-content:space-between}.divider[data-v-bc13c67a]{background-color:#2a2a2a;height:1px;width:100%}.bt[data-v-bc13c67a]{align-items:center;display:flex;flex-direction:column;justify-content:center;margin-top:1rem;width:100%}.spinner[data-v-bc13c67a]{animation:spin-bc13c67a .6s ease-out infinite;background:transparent;border:4px solid transparent;border-radius:100%;border-top:2px solid #fff;box-sizing:border-box;height:20px;margin-bottom:-2px;margin-left:10px;width:20px}@keyframes spin-bc13c67a{to{transform:rotate(1turn)}}.colm[data-v-bc13c67a]{flex:0 0 63%;max-width:63%}.coln[data-v-bc13c67a]{flex:0 0 30%;max-width:30%}.coli[data-v-bc13c67a]{flex:0 0 50%;max-width:50%}@media only screen and (max-width:1200px){.colm[data-v-bc13c67a],.coln[data-v-bc13c67a]{flex:0 0 100%;max-width:100%}}@media only screen and (max-width:500px){.box[data-v-bc13c67a]{height:80px;width:150px}.inp[data-v-bc13c67a]{height:25px;width:25px}}@media only screen and (max-width:460px){.coli[data-v-bc13c67a]{flex:0 0 100%;margin-top:2rem;max-width:100%}}",""]),o.locals={},e.exports=o},560:function(e,t,n){"use strict";n(462)},561:function(e,t,n){var o=n(7)((function(i){return i[1]}));o.push([e.i,".form-control[readonly]{background-color:transparent}",""]),o.locals={},e.exports=o},622:function(e,t,n){"use strict";n.r(t);n(61);var o=n(11),r=(n(162),n(51),n(50),n(60)),c=(n(163),{layout:"default2",data:function(){return{validated:!1,seen:!0,isLoading:!1,model:{id:"",selectedDay:null,selectedShift:null,selectedDeck:null,adult:0,kid:0,infant:0,aTotal:0,a_fprice:0,kTotal:0,k_price:0,discount:0,stotal:0,total:0,agree:!1,paid:!1,cancelled:!1,checkID:"",phone:"",order_id:""},error:!1,load:!0}},methods:{getcat:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.prev=1,o=n.$route.params.id,t.next=5,r.a.collection("payments").getFirstListItem('checkID="'.concat(o,'"'));case 5:c=t.sent,n.model=c,""!=n.model.order_id&&""==n.model.payment_id&&n.setIn(n.model.order_id),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),n.error=!0;case 13:n.load=!1;case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},formatDates:function(e){var t=e.split("/");return new Date(t[2],t[1]-1,t[0]).toLocaleDateString(void 0,{day:"numeric",month:"short",year:"numeric"})},save:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,data,c,d,l,m;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e).isLoading=!0,data={amt:n.model.total},"https://payment.alfrescogrand.com/api/createOrder",c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)},t.next=7,fetch("https://payment.alfrescogrand.com/api/createOrder",c);case 7:return d=t.sent,t.next=10,d.text();case 10:if(l=t.sent,m={order_id:l},!d.ok){t.next=17;break}return t.next=15,r.a.collection("payments").update(n.model.id,m).then((function(){n.setIn(l);var e,t={key:"rzp_live_uorJQBROKDI3Ga",amount:100*n.model.total,name:"Alfresco Grand",description:"Alfresco Grand Cruise Booking.",image:"https://alfrescogrand.com/img/al/img/logo.png",order_id:l,handler:(e=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.payment_id=t.razorpay_payment_id,n.$message({showClose:!0,message:"Payment Successful!",type:"success"});case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),modal:{ondismiss:function(){n.isLoading=!1,n.$message({showClose:!0,message:"Payment Failed",type:"warning"})}},prefill:{email:"",contact:n.model.phone},notes:{name:"Alfresco Grand",email:"info@alfrecogrand.com"},theme:{color:"#002fa7"}};new Razorpay(t).open()})).catch((function(){n.isLoading=!1,n.$message({showClose:!0,message:"Something went wrong!",type:"warning"})}));case 15:t.next=19;break;case 17:n.isLoading=!1,n.$message({showClose:!0,message:"Something went wrong!",type:"warning"});case 19:case"end":return t.stop()}}),t)})))()},setIn:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,c,dt,data,d,l,m,f,v,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=!1,c=t,(dt=new Date).setMinutes(dt.getMinutes()+13);case 4:if(0!=o){n.next=33;break}return data={id:e},"https://payment.alfrescogrand.com/api/getOrder",d={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)},n.next=10,fetch("https://payment.alfrescogrand.com/api/getOrder",d);case 10:return l=n.sent,n.next=13,l.json();case 13:if(m=n.sent,!l.ok||0==m.items.length){n.next=29;break}if(0==(f=m.items.filter((function(e){return"captured"==e.status}))).length||0!=o){n.next=29;break}return v={agree:!0,paid:!0,payment_id:f[0].id},n.next=20,r.a.collection("payments").update(c.model.id,v);case 20:return n.next=22,r.a.collection("BookingInitiated").getFirstListItem('checkID="'.concat(c.model.checkID,'" && phone="').concat(c.model.phone,'"'));case 22:return h=n.sent,n.next=25,r.a.collection("BookingInitiated").update(h.id,{status:"Completed",payment_id:f[0].id});case 25:return h.status="Completed",h.payment_id=f[0].id,n.next=29,r.a.collection("Booking").create(h).then((function(e){c.model.paid=!0,o=!0;var t="/Tickets/".concat(e.id);c.$router.push(t)})).catch((function(){c.isLoading=!1,swal.fire({title:"Something went wrong!",text:"Please Contact Administration!.",type:"error",confirmButtonClass:"btn btn-success btn-fill",buttonsStyling:!0})}));case 29:new Date>dt&&(o=!0),n.next=4;break;case 33:case"end":return n.stop()}}),n)})))()}},mounted:function(){this.getcat()}}),d=c,l=(n(558),n(560),n(16)),component=Object(l.a)(d,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"container-fluid mt-3 d-flex flex-wrap justify-content-center"},[t("div",{staticClass:"coln"},[0==e.error&&0==e.load?t("h1",{staticClass:"text-center",staticStyle:{"margin-top":"4rem"}},[e._v("\n        BOOKING SUMMARY\n      ")]):e._e(),e._v(" "),1==e.error&&0==e.load?t("h2",{staticClass:"text-center",staticStyle:{"margin-top":"4rem"}},[e._v("\n        Invalid link or the link has expired. Please Contact the\n        Administration.\n      ")]):e._e(),e._v(" "),0==e.error&&0==e.load?t("div",{staticClass:"boxes"},[1==e.model.paid||1==e.model.cancelled?t("div",{staticClass:"paid",style:{border:e.model.paid?"2px dotted green":"2px dotted red"}},[t("h2",[e._v(e._s(1==e.model.paid?"Paid":"Expired"))])]):e._e(),e._v(" "),t("div",{staticClass:"lines"},[t("i",{staticClass:"fas fa-calendar-check"}),e._v(" "),t("h3",{staticStyle:{"margin-left":"8px"}},[e._v("\n            "+e._s(e.model.selectedDay?e.formatDates(e.model.selectedDay):"Date NA")+"\n          ")])]),e._v(" "),t("div",{staticClass:"lines"},[t("i",{staticClass:"fas fa-clock"}),e._v(" "),t("h3",{staticStyle:{"margin-left":"6px"}},[e._v("\n            "+e._s(e.model.selectedShift?e.model.selectedShift:"Shift NA")+"\n          ")])]),e._v(" "),t("div",{staticClass:"lines"},[t("i",{staticClass:"fas fa-couch"}),e._v(" "),t("h3",[e._v("\n            "+e._s(e.model.selectedDeck?"No Deck"==e.model.selectedDeck?"Middle Deck":e.model.selectedDeck:"Deck NA")+"\n          ")])]),e._v(" "),t("div",{staticClass:"lines1",staticStyle:{"margin-top":"2rem"}},[t("h3",[e._v("Adult(s) : X "+e._s(e.model.adult))]),e._v(" "),t("h3",[e._v("Rs "+e._s(e.model.aTotal+e.model.a_fprice))])]),e._v(" "),t("div",{staticClass:"lines1 mb-2"},[t("h3",[e._v("Kids(s) : X "+e._s(e.model.kid))]),e._v(" "),t("h3",[e._v("Rs "+e._s(e.model.kTotal+e.model.k_fprice))])]),e._v(" "),t("div",{staticClass:"lines1 mb-2"},[t("h3",[e._v("Infant(s) : X "+e._s(e.model.infant))]),e._v(" "),t("h3",[e._v("Rs 0")])]),e._v(" "),t("div",{staticClass:"divider"}),e._v(" "),t("div",{staticClass:"lines1 mt-2"},[t("h3",[e._v("Sub Total")]),e._v(" "),t("h3",[e._v("Rs "+e._s(e.model.stotal))])]),e._v(" "),t("div",{staticClass:"lines1 mt-2"},[t("h3",[e._v("Discount")]),e._v(" "),t("h3",[e._v("- Rs "+e._s(e.model.discount))])]),e._v(" "),t("div",{staticClass:"divider"}),e._v(" "),t("div",{staticClass:"lines1 mt-2"},[t("h3",[e._v("Total (Including GST)")]),e._v(" "),t("h3",[e._v("Rs "+e._s(e.model.total))])]),e._v(" "),t("div",{staticClass:"d-flex mt-2"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.model.agree,expression:"model.agree"}],staticClass:"inp mr-2",attrs:{type:"checkbox",disabled:1==e.isLoading||(1==e.model.paid||1==e.model.cancelled)},domProps:{checked:Array.isArray(e.model.agree)?e._i(e.model.agree,null)>-1:e.model.agree},on:{change:function(t){var n=e.model.agree,o=t.target,r=!!o.checked;if(Array.isArray(n)){var c=e._i(n,null);o.checked?c<0&&e.$set(e.model,"agree",n.concat([null])):c>-1&&e.$set(e.model,"agree",n.slice(0,c).concat(n.slice(c+1)))}else e.$set(e.model,"agree",r)}}}),e._v(" "),e._m(0)]),e._v(" "),0==e.model.paid&&0==e.model.cancelled?t("div",{staticClass:"bt"},[0==e.isLoading?t("button",{staticClass:"btn btn-success",staticStyle:{"background-color":"rgb(33, 1, 192)"},attrs:{type:"button",disabled:0==e.model.agree},on:{click:function(t){return e.save()}}},[e._v("\n            Proceed to Payment\n          ")]):e._e(),e._v(" "),1==e.isLoading?t("button",{staticClass:"btn btn-success d-flex",staticStyle:{"background-color":"rgb(33, 1, 192)"},attrs:{type:"button",disabled:""}},[e._v("\n            Processing . Please Wait...\n            "),t("p",{staticClass:"spinner"})]):e._e(),e._v(" "),1==e.isLoading?t("h4",{staticClass:"mt-2"},[e._v("\n            (Please Do Not Refresh This Page)\n          ")]):e._e()]):e._e()]):e._e()])])])}),[function(){var e=this,t=e._self._c;return t("h4",[e._v("\n            I have read and agree to Alfresco Grand's\n            "),t("a",{staticStyle:{color:"blue","text-decoration":"underline"},attrs:{href:"https://alfrescogrand.com/Termsandconditions"}},[e._v("terms and conditions")])])}],!1,null,"bc13c67a",null);t.default=component.exports}}]);