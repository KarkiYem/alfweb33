(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{432:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(127);var o=n(164),c=n(91);function l(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(o.a)(e)||Object(c.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},435:function(e,t,n){var content=n(487);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(8).default)("3f751eb4",content,!0,{sourceMap:!1})},436:function(e,t,n){var content=n(489);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(8).default)("7d63f51a",content,!0,{sourceMap:!1})},437:function(e,t,n){var content=n(491);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(8).default)("3a9bd338",content,!0,{sourceMap:!1})},484:function(e,t,n){"use strict";var r=n(12),o=n(485),c=n(224),l=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(c);r(r.P+r.F*l,"String",{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},485:function(e,t,n){var r=n(28),o=n(225),c=n(41);e.exports=function(e,t,n,l){var d=String(c(e)),f=d.length,m=void 0===n?" ":String(n),h=r(t);if(h<=f||""==m)return d;var v=h-f,k=o.call(m,Math.ceil(v/m.length));return k.length>v&&(k=k.slice(0,v)),l?k+d:d+k}},486:function(e,t,n){"use strict";n(435)},487:function(e,t,n){var r=n(7)((function(i){return i[1]}));r.push([e.i,".inpp{accent-color:#2101c0;cursor:pointer;height:30px!important;width:20px!important}.custom-swal-button1{background-color:#002fa7;border:1px solid #002fa7;border-radius:5px;color:#fff;font-weight:700;height:2.5rem;width:3rem}",""]),r.locals={},e.exports=r},488:function(e,t,n){"use strict";n(436)},489:function(e,t,n){var r=n(7)((function(i){return i[1]}));r.push([e.i,"h1[data-v-44c2ee3f],h3[data-v-44c2ee3f],h4[data-v-44c2ee3f],h6[data-v-44c2ee3f]{color:#fff}.popup[data-v-44c2ee3f]{align-items:center;background-color:rgba(0,0,0,.5);bottom:0;display:flex;height:100%;justify-content:center;position:absolute;top:0;width:100%;z-index:9999}.popup2[data-v-44c2ee3f]{background-color:#fff;height:80%;overflow-y:scroll;padding:10px;width:80%}.pc[data-v-44c2ee3f]{color:#000;font-size:14px;font-weight:500;line-height:30px;opacity:1}.inf[data-v-44c2ee3f]{align-items:center;display:flex;height:25px;justify-content:center;width:25px}.ht[data-v-44c2ee3f]{margin-top:1rem}.btn1[data-v-44c2ee3f]{background-color:#002fa7;border:1px solid #002fa7;height:3rem}.btn1[data-v-44c2ee3f],input[data-v-44c2ee3f]{color:#fff;font-weight:700;width:100%}input[data-v-44c2ee3f]{background-color:transparent;border:1px solid #ccc;border-radius:6px;font-size:1rem;height:45px;padding:0 14px}input[data-v-44c2ee3f]:focus{outline:none}[data-v-44c2ee3f]::-moz-placeholder{color:#505050;font-size:1.063rem}[data-v-44c2ee3f]::placeholder{color:#505050;font-size:1.063rem}.box[data-v-44c2ee3f]{align-items:center;border:1px solid;border-radius:10px;cursor:pointer;height:100px;justify-content:center;margin:5px 10px 0;width:200px}.box[data-v-44c2ee3f],.row1[data-v-44c2ee3f]{display:flex}.coll[data-v-44c2ee3f]{width:30%}.coll[data-v-44c2ee3f],.coll1[data-v-44c2ee3f]{margin-left:10px}.coll1[data-v-44c2ee3f]{width:15%}.boxes[data-v-44c2ee3f]{border:1px solid;border-radius:10px;height:-moz-fit-content;height:fit-content;margin:2rem auto;padding:15px;width:90%}i[data-v-44c2ee3f]{font-size:20px;margin-right:15px;margin-top:5px}.lines[data-v-44c2ee3f],.lines1[data-v-44c2ee3f]{display:flex;margin-top:8px}.lines1[data-v-44c2ee3f]{justify-content:space-between}.divider[data-v-44c2ee3f]{background-color:#2a2a2a;height:1px;width:100%}.bt[data-v-44c2ee3f]{align-items:center;display:flex;flex-direction:column;justify-content:center;margin-top:1rem;width:100%}.spinner[data-v-44c2ee3f]{animation:spin-44c2ee3f .6s ease-out infinite;background:transparent;border:4px solid transparent;border-radius:100%;border-top:2px solid #fff;box-sizing:border-box;height:20px;margin-bottom:-2px;margin-left:10px;width:20px}@keyframes spin-44c2ee3f{to{transform:rotate(1turn)}}.colm[data-v-44c2ee3f]{flex:0 0 60%;max-width:60%}.coln[data-v-44c2ee3f]{flex:0 0 40%;max-width:40%}.coli[data-v-44c2ee3f]{flex:0 0 50%;max-width:50%}@media only screen and (max-width:1200px){.colm[data-v-44c2ee3f],.coln[data-v-44c2ee3f]{flex:0 0 100%;max-width:100%}}@media only screen and (max-width:500px){.box[data-v-44c2ee3f]{align-items:center;display:flex;height:60px;justify-content:center;padding:8px;width:150px}h6[data-v-44c2ee3f]{text-align:center}}@media only screen and (max-width:460px){.coli[data-v-44c2ee3f]{flex:0 0 100%;margin-top:2rem;max-width:100%}}",""]),r.locals={},e.exports=r},490:function(e,t,n){"use strict";n(437)},491:function(e,t,n){var r=n(7)((function(i){return i[1]}));r.push([e.i,".form-control[readonly]{background-color:transparent}",""]),r.locals={},e.exports=r},604:function(e,t,n){"use strict";n.r(t);n(110),n(111),n(52),n(51),n(49),n(61),n(40),n(63),n(64),n(65);var r=n(432),o=n(11),c=(n(50),n(162),n(29),n(112),n(113),n(484),n(60));n(163);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var f={layout:"default2",data:function(){return{validated:!1,seen:!0,days:[],shift:[],deck:[],radio:"No",selectedDay:null,selectedShift:null,selectedDeck:null,adult:[],kid:[],aTotal:0,kTotal:0,total:0,aprice:0,a_fprice:0,kprice:0,k_fprice:0,phone:"",isLoading:!1,mode:"Online",billaddress:"",gstno:"",gst:0,gst1:0,vat:0,vat1:0,at:[],at1:[],infant:0,isOnce:!1,veg:0,nonveg:0,other:0,desc:"",decks:[],step:0,cruiseDates:[],infantdetails:[],tod:"",yup11:!1,dialogVisible:!0,payment_id:"",ticketid:""}},watch:{adult:function(){this.aTotal=0,this.aTotal=this.aTotal+this.adult.length*(this.aprice+this.a_fprice)},kid:function(){this.kTotal=0,this.kTotal=this.kTotal+this.kid.length*(this.kprice+this.k_fprice)},selectedDay:function(){this.check()},selectedShift:function(){var e=this;e.at=e.at1.filter((function(t){return t.name==e.selectedShift})),e.deck=e.at.length>0?e.at[0].pricing.map((function(e){return e.deck})):[],e.selectedDeck=null},selectedDeck:function(){var e=this;e.aTotal=0,e.kTotal=0;var t=e.at.length>0?e.at[0].pricing.filter((function(t){return t.deck==e.selectedDeck})):[];e.aprice=t.length>0?parseFloat(t[0].adult):0,e.a_fprice=t.length>0?parseFloat(t[0].a_fprice):0,e.kprice=t.length>0?parseFloat(t[0].kid):0,e.k_fprice=t.length>0?parseFloat(t[0].k_fprice):0,e.aTotal=e.aTotal+e.adult.length*(e.aprice+e.a_fprice),e.kTotal=e.kTotal+e.kid.length*(e.kprice+e.k_fprice)}},methods:{checkAge:function(i){this.kid[i].age>12&&(this.kid[i].age=12)},getcat:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e).days=n.getNextThreeDays(),n.phone=n.$store.state.phone,t.next=5,c.a.collection("settings").getOne("wpaaz5r1qamc9o1");case 5:return r=t.sent,c.a.collection("settings").subscribe("wpaaz5r1qamc9o1",(function(e){n.gst=e.record.gst,n.gst1=e.record.gst1,n.vat=e.record.vat,n.vat1=e.record.vat1})),o=new Date,l=function(e){var t=e.getDate(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],r=e.getFullYear();return"".concat(t," ").concat(n," ").concat(r)},n.tod=l(o),n.gst=r.gst,n.gst1=r.gst1,n.vat=r.vat,n.vat1=r.vat1,t.next=16,c.a.collection("webcruise").getFullList({sort:"-created"});case 16:n.at1=t.sent,n.at1=n.at1.sort((function(a,b){return a.order-b.order})),c.a.collection("webcruise").subscribe("*",(function(e){n.getDatas()})),n.getData(),n.check1();case 21:case"end":return t.stop()}}),t)})))()},getData:function(){var e=this;e.shift=e.at1.map((function(e){return e.name})),e.decks=e.at1.map((function(t){return{name:t.name,isOpen:e.isCruiseOpen(t.closing_time)}})),e.selectedShift=e.decks.filter((function(e){return 1==e.isOpen})).length>0?e.decks.filter((function(e){return 1==e.isOpen}))[0].name:null,e.at=e.at1.filter((function(t){return t.name==e.selectedShift})),e.deck=e.at.length>0?e.at[0].pricing.map((function(e){return e.deck})):[],e.selectedDay=e.days[0],e.closedShifts=e.decks.filter((function(e){return 0==e.isOpen})).map((function(e){return e.name}))},getDatas:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,c.a.collection("webcruise").getFullList({sort:"-created"});case 3:n.at1=t.sent,n.shift=n.at1.map((function(e){return e.name})),n.decks=n.at1.map((function(e){return{name:e.name,isOpen:n.isCruiseOpen(e.closing_time)}})),n.selectedShift=n.decks.filter((function(e){return 1==e.isOpen})).length>0?n.decks.filter((function(e){return 1==e.isOpen}))[0].name:null,n.at=n.at1.filter((function(e){return e.name==n.selectedShift})),n.deck=n.at.length>0?n.at[0].pricing.map((function(e){return e.deck})):[],n.selectedDay=n.days[0],n.closedShifts=n.decks.filter((function(e){return 0==e.isOpen})).map((function(e){return e.name}));case 11:case"end":return t.stop()}}),t)})))()},isCruiseOpen:function(time){if(""!=time){var e=new Date,t=time.split(":"),n=parseInt(t[0]),r=parseInt(t[1].split(" ")[0]),o=t[1].split(" ")[1];"PM"===o&&12!==n?n+=12:"AM"===o&&12===n&&(n=0);var c=new Date;return c.setHours(n,r,0,0),e<c}return!0},getNextThreeDays:function(){var e=new Date,t=new Date(e);t.setDate(e.getDate()+1);var n=new Date(e);n.setDate(e.getDate()+2);var r=function(e){var t=e.getDate(),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()],r=e.getFullYear();return"".concat(t," ").concat(n," ").concat(r)};return[r(e),r(t),r(n)]},selects:function(e){var t,n,r,o,c=this;if(0==c.cruiseDates.filter((function(t){return t.cruise==e&&t.dates==c.selectedDay})).length){var l=new Date,d=(n=(t=l).getDate(),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],o=t.getFullYear(),"".concat(n," ").concat(r," ").concat(o)),f=c.decks.filter((function(t){return t.name==e}));1==f[0].isOpen||0==f[0].isOpen&&d!=this.selectedDay?c.selectedShift=e:c.$message({showClose:!0,message:"".concat(e," booking has been closed for today!"),type:"warning"})}else c.$message({showClose:!0,message:"".concat(e," is not available for this date!"),type:"warning"})},check:function(){this.selectedShift=null},check1:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.next=3,c.a.collection("cruise_logs").getFullList({sort:"-created"});case 3:return r=t.sent,n.cruiseDates=r.map((function(e){return{cruise:e.cruise,dates:e.dates}})),t.next=7,c.a.collection("cruise_logs").subscribe("*",function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.collection("cruise_logs").getFullList({sort:"-created"});case 2:r=e.sent,n.cruiseDates=r.map((function(e){return{cruise:e.cruise,dates:e.dates}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return t.stop()}}),t)})))()},add:function(){this.adult.push({name:"",age:""})},add1:function(){this.kid.push({name:"",age:""})},add2:function(){var e=this;0==e.isOnce&&swal.fire({title:"Book a kid seat if you want a seat for your infant!",buttonsStyling:!1,customClass:{confirmButton:"custom-swal-button1",cancelButton:"custom-swal-button1"}}),e.isOnce=!0,e.infant++,e.infantdetails.push({name:"",age:""})},minus:function(){this.adult.splice(0,1)},minus1:function(){this.kid.splice(0,1)},minus2:function(){var e=this;e.infant>0&&(e.infant--,e.infantdetails.splice(0,1))},ad:function(){var e=this,t=e.adult.length+e.kid.length;e.veg+e.nonveg+e.other<t?e.veg++:e.$message({showClose:!0,message:"Should not exceed total no. of person!",type:"warning"})},ad1:function(){var e=this,t=e.adult.length+e.kid.length;e.veg+e.nonveg+e.other<t?e.nonveg++:e.$message({showClose:!0,message:"Should not exceed total no. of person!",type:"warning"})},ad2:function(){var e=this,t=e.adult.length+e.kid.length;e.veg+e.nonveg+e.other<t?e.other++:e.$message({showClose:!0,message:"Should not exceed total no. of person!",type:"warning"})},mi:function(){this.veg>0&&this.veg--},mi1:function(){this.nonveg>0&&this.nonveg--},mi2:function(){this.other>0&&this.other--},save1:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(n=e).selectedDay){t.next=4;break}return n.$message({showClose:!0,message:"Please Select Date!",type:"warning"}),t.abrupt("return");case 4:if(null!=n.selectedShift){t.next=7;break}return n.$message({showClose:!0,message:"Please Select Shift!",type:"warning"}),t.abrupt("return");case 7:if(null!=n.selectedDeck){t.next=10;break}return n.$message({showClose:!0,message:"Please Select Deck!",type:"warning"}),t.abrupt("return");case 10:if(n.kid.length+n.adult.length!=0){t.next=13;break}return n.$message({showClose:!0,message:"No of person cannot be zero!",type:"warning"}),t.abrupt("return");case 13:n.step=1;case 14:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,o,c,d,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(n=e).selectedDay){t.next=4;break}return n.$message({showClose:!0,message:"Please Select Date!",type:"warning"}),t.abrupt("return");case 4:if(null!=n.selectedShift){t.next=7;break}return n.$message({showClose:!0,message:"Please Select Shift!",type:"warning"}),t.abrupt("return");case 7:if(null!=n.selectedDeck){t.next=10;break}return n.$message({showClose:!0,message:"Please Select Deck!",type:"warning"}),t.abrupt("return");case 10:if(""!=n.phone){t.next=13;break}return n.$message({showClose:!0,message:"Phone number is required!",type:"warning"}),t.abrupt("return");case 13:if(0!=!isNaN(n.phone)){t.next=16;break}return n.$message({showClose:!0,message:"Phone number is invalid!",type:"warning"}),t.abrupt("return");case 16:if(10==n.phone.length){t.next=19;break}return n.$message({showClose:!0,message:"Phone number is invalid!",type:"warning"}),t.abrupt("return");case 19:if(n.kid.length+n.adult.length!=0){t.next=22;break}return n.$message({showClose:!0,message:"No of person cannot be zero!",type:"warning"}),t.abrupt("return");case 22:if(!("Dinner Cruise"==n.selectedShift&&n.kid.length+n.adult.length<n.veg+n.nonveg+n.other)){t.next=25;break}return n.$message({showClose:!0,message:"Invalid Passenger Details!!",type:"warning"}),t.abrupt("return");case 25:if("Dinner Cruise"!=n.selectedShift||n.kid.length+n.adult.length==n.veg+n.nonveg+n.other){t.next=28;break}return n.$message({showClose:!0,message:"Food Preferrence is required for all persons!",type:"warning"}),t.abrupt("return");case 28:if("Dinner Cruise"!=n.selectedShift){t.next=32;break}if(0!=n.veg||0!=n.nonveg||0!=n.other){t.next=32;break}return n.$message({showClose:!0,message:"Food Preferrence is required",type:"warning"}),t.abrupt("return");case 32:o=[].concat(Object(r.a)(n.adult),Object(r.a)(n.kid)),c=l(o),t.prev=34,c.s();case 36:if((d=c.n()).done){t.next=46;break}if(""!=(f=d.value).name){t.next=41;break}return n.$message({showClose:!0,message:"Passenger Details cannot be empty!",type:"warning"}),t.abrupt("return");case 41:if(""!=f.age){t.next=44;break}return n.$message({showClose:!0,message:"Passenger Details cannot be empty!",type:"warning"}),t.abrupt("return");case 44:t.next=36;break;case 46:t.next=51;break;case 48:t.prev=48,t.t0=t.catch(34),c.e(t.t0);case 51:return t.prev=51,c.f(),t.finish(51);case 54:n.yesok1();case 55:case"end":return t.stop()}}),t,null,[[34,48,51,54]])})))()},yesok1:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r,o,c,l,dt,d,f,m,h,v,k,y,data,x,_,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=(n=e).yup11){t.next=33;break}return n.dialogVisible=!0,n.isLoading=!0,r=new Date,o=r.getFullYear(),c=r.getMonth()+1,l=r.getDate(),dt="".concat(l,"/").concat(c,"/").concat(o),d=new Date(n.selectedDay),f=d.getFullYear(),m=d.getMonth()+1,h=d.getDate(),v="".concat(h,"/").concat(m,"/").concat(f),t.next=16,n.updateInvoice();case 16:return k=t.sent,y=parseInt((new Date).getTime()+""+Math.floor(1e6*Math.random())),t.next=20,n.getticket(n.selectedDeck,n.selectedShift,v);case 20:return n.ticketid=t.sent,data={adultdetails:n.adult,ticketid:n.ticketid,email:"",infantdetails:n.infantdetails,kiddetails:n.kid,phone:n.phone,date:v,cruise:n.selectedShift,deck:n.selectedDeck,adult:n.adult.length,kid:n.kid.length,person:n.kid.length+n.adult.length,adultprice:n.aprice,kidprice:n.kprice,total:n.kTotal+n.aTotal,stotal:n.kTotal+n.aTotal,payment_id:n.payment_id,pay_mode:n.mode,booking_date:dt,payment:"",seatpreference:"",bookingwithgst:"",billaddress:n.billaddress,gstno:n.gstno,bookedBy:"",percent:"0",couponvalue:"0",gst:n.gst,gst1:n.gst1,vat:n.vat,vat1:n.vat1,veg:n.veg,nonveg:n.nonveg,other:n.other,desc:n.desc,cancellable:!0,name:n.adult[0].name,bookedbydetails:n.adult[0].name+"(User)",invoice:k,status:"Pending",infant:n.infant,foodtotal:n.adult.length*n.a_fprice+n.kid.length*n.k_fprice,cruisetotal:n.kid.length*n.kprice+n.adult.length*n.aprice,checkID:y,dtas:{deck:n.selectedDeck,shift:n.selectedShift,date:v,no:n.adult.length+n.kid.length}},"https://alfrescogrand.com/api/v4/checkAvailability",x={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)},t.next=26,fetch("https://alfrescogrand.com/api/v4/checkAvailability",x);case 26:return _=t.sent,t.next=29,_.json();case 29:w=t.sent,_.ok?1==w.message.response.isAvailable&&0!=w.message.response.seats.length?n.order(y,v):(n.isLoading=!1,n.$message({showClose:!0,message:"Seats are not available at this moment. Try again later!",type:"warning"})):(n.isLoading=!1,n.$message({showClose:!0,message:"Something went wrong!",type:"warning"})),t.next=34;break;case 33:n.$message({showClose:!0,message:"Please Agree to the terms and conditions!",type:"warning"});case 34:case"end":return t.stop()}}),t)})))()},updateInvoice:function(){return Object(o.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.collection("invoice").getOne("7kljohapn4u67bh");case 2:return t=e.sent,e.next=5,c.a.collection("invoice").update("7kljohapn4u67bh",{invoice:t.invoice+1});case 5:return e.abrupt("return",t.invoice);case 6:case"end":return e.stop()}}),e)})))()},order:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var l,d,desc,data,f,m,h,v;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return d=(l=n).kTotal+l.aTotal,desc=l.selectedShift+" "+l.selectedDeck,data={amt:d},"https://payment.alfrescogrand.com/api/createOrder",f={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)},r.next=8,fetch("https://payment.alfrescogrand.com/api/createOrder",f);case 8:return m=r.sent,r.next=11,m.text();case 11:if(h=r.sent,v={selectedDay:t,selectedShift:l.selectedShift,selectedDeck:l.selectedDeck,adult:l.adult.length,kid:l.kid.length,infant:l.infant,aTotal:l.aprice,a_fprice:l.a_fprice,kTotal:l.kprice,k_fprice:l.k_fprice,discount:0,total:l.kTotal+l.aTotal,stotal:l.kTotal+l.aTotal,agree:!0,phone:l.phone,ticketid:l.ticketid,checkID:e,paid:!1,cancelled:!1,payment_id:"",order_id:h},!m.ok){r.next=18;break}return r.next=16,c.a.collection("payments").create(v).then((function(t){var n,r={key:"rzp_live_uorJQBROKDI3Ga",amount:100*d,name:desc,description:desc,image:"https://alfrescogrand.com/img/al/img/logo.png",order_id:h,handler:(n=Object(o.a)(regeneratorRuntime.mark((function n(r){var o,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l.payment_id=r.razorpay_payment_id,o={paid:!0,payment_id:l.payment_id},n.next=4,c.a.collection("payments").update(t.id,o);case 4:return n.next=6,c.a.collection("BookingInitiated").getFirstListItem('checkID="'.concat(e,'" && phone="').concat(l.phone,'"'));case 6:return d=n.sent,n.next=9,c.a.collection("BookingInitiated").update(d.id,{status:"Completed"});case 9:return d.status="Completed",d.payment_id=l.payment_id,n.next=13,c.a.collection("Booking").create(d).then((function(e){l.$store.commit("id11",e.id),l.$router.push("/Details")})).catch((function(){swal.fire({title:"Something went wrong!",text:"Please Contact Administration!.",type:"error",confirmButtonClass:"btn btn-success btn-fill",buttonsStyling:!0})}));case 13:l.$message({showClose:!0,message:"Payment Successful!",type:"success"});case 14:case"end":return n.stop()}}),n)}))),function(e){return n.apply(this,arguments)}),modal:{ondismiss:function(){l.isLoading=!1,l.$message({showClose:!0,message:"Payment Failed",type:"warning"})}},prefill:{email:"",contact:l.phone},notes:{name:l.adult[0].name,email:"info@alfrecogrand.com"},theme:{color:"#002fa7"}};new Razorpay(r).open()})).catch((function(){l.isLoading=!1,l.$message({showClose:!0,message:"Something went wrong!",type:"warning"})}));case 16:r.next=20;break;case 18:l.isLoading=!1,l.$message({showClose:!0,message:"Something went wrong!",type:"warning"});case 20:case"end":return r.stop()}}),r)})))()},getticket:function(a,b,e){return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r,o,l,d,f,m,h,v,k,y,x,_,w,C,S,data,D,O,T,P,A,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.split("/"),r=new Date(n[2],n[1]-1,n[0]),o=r.getFullYear().toString().slice(-2),l=("0"+(r.getMonth()+1)).slice(-2),d=("0"+r.getDate()).slice(-2),f=o+l+d,t.next=8,c.a.collection("Ticket").getFullList({sort:"-created"});case 8:if(m=t.sent,!((h=m.filter((function(t){return t.deck==a&&t.cruise==b&&t.date==e}))).length>0)){t.next=24;break}return v=h[0].ticket,k=h[0].cruiseid,y=h[0].deck,x=y.charAt(0).toUpperCase(),_=f+k+x+v,w=v.length,C=(parseInt(v,10)+1).toString().padStart(w,"0"),S={ticket:C},t.next=21,c.a.collection("Ticket").update(h[0].id,S);case 21:return t.abrupt("return",_);case 24:return data={ticket:"001",deck:a,cruise:b,date:e,cruiseid:"Dinner Cruise"==b?"C3":"Sunset Cruise"==b?"C1":"Sundown Cruise"==b?"C2":"C4"},t.next=28,c.a.collection("Ticket").create(data);case 28:return D=t.sent,O=D.ticket,T=D.cruiseid,P=D.deck,A=P.charAt(0).toUpperCase(),j=f+T+A+O,t.abrupt("return",j);case 35:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getcat()}},m=f,h=(n(486),n(488),n(490),n(16)),v={layout:"default2",middleware:["Checkuser1"],components:{Booking:Object(h.a)(m,(function(){var e=this,t=e._self._c;return t("div",{staticStyle:{"min-height":"100vh","background-color":"black",position:"relative"}},[t("header",{staticClass:"container pb-2"},[t("div",{staticClass:"row align-items-center py-4"},[0==e.step?t("div",{staticClass:"col-lg-12 col-12"},[t("h6",{staticClass:"h2 text-white d-inline-block mb-0"},[e._v("Book Your Seat Now!")])]):e._e()])]),e._v(" "),t("div",{staticClass:"container mt-3 d-flex flex-wrap",staticStyle:{"background-color":"#393939","border-radius":"10px",padding:"20px"}},[0==e.step?t("div",{staticClass:"colm"},[t("div",{staticClass:"row ht"},e._l(e.days,(function(n,i){return t("div",{key:i,staticClass:"box",style:{background:e.selectedDay==n?"#002fa7":""},on:{click:function(t){0==e.isLoading&&(e.selectedDay=n)}}},[t("h6",[e._v(e._s(n))])])})),0),e._v(" "),t("h4",{staticStyle:{"margin-top":"3rem"}},[e._v("Desire Shift")]),e._v(" "),t("div",{staticClass:"row ht"},e._l(e.shift,(function(n,i){return t("div",{key:i,staticClass:"box",style:{background:e.cruiseDates.filter((function(t){return t.cruise==n&&t.dates==e.selectedDay})).map((function(e){return e.cruise})).includes(n)&&e.cruiseDates.filter((function(t){return t.cruise==n&&t.dates==e.selectedDay})).map((function(e){return e.dates})).includes(e.selectedDay)?"#80807e":e.tod==e.selectedDay&&e.closedShifts.includes(n)?"#c2c2be":e.selectedShift==n?"#002fa7":""},on:{click:function(t){0==e.isLoading&&e.selects(n)}}},[t("h6",[e._v(e._s(n))])])})),0),e._v(" "),t("h4",{staticStyle:{"margin-top":"3rem"}},[e._v("Desire Deck")]),e._v(" "),e.deck.length>0?t("div",{staticClass:"row ht"},e._l(e.deck,(function(n,i){return t("div",{key:i,staticClass:"box",style:{background:e.selectedDeck==n?"#002fa7":""},on:{click:function(t){0==e.isLoading&&(e.selectedDeck=n)}}},[t("h6",[e._v(e._s("No Deck"==n?"Dinner Deck":n))])])})),0):t("div",{staticClass:"row ht"},[e._m(0)]),e._v(" "),t("div",{staticClass:"d-flex flex-wrap",staticStyle:{"margin-top":"3rem"}},[t("div",{staticClass:"coli"},[t("h4",{staticStyle:{"margin-bottom":"15px"}},[e._v("Passenger No.")]),e._v(" "),t("div",{staticClass:"d-flex"},[t("button",{staticClass:"btn btn-sm btn-primary mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.minus()}}},[e._v("\n              -\n            ")]),e._v(" "),t("h6",{staticStyle:{"margin-top":"16px","margin-left":"8px","margin-right":"8px"}},[e._v("\n              Adults ("+e._s(e.adult.length)+")\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary ml-2 mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.add()}}},[e._v("\n              +\n            ")])]),e._v(" "),t("div",{staticClass:"d-flex",staticStyle:{"margin-top":"1rem"}},[t("button",{staticClass:"btn btn-sm btn-primary mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.minus1()}}},[e._v("\n              -\n            ")]),e._v(" "),t("h6",{staticStyle:{"margin-top":"16px","margin-left":"16px","margin-right":"7px"}},[e._v("\n              Kids ("+e._s(e.kid.length)+")\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary ml-3 mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.add1()}}},[e._v("\n              +\n            ")])]),e._v(" "),t("div",{staticClass:"d-flex",staticStyle:{"margin-top":"1rem"}},[t("button",{staticClass:"btn btn-sm btn-primary mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.minus2()}}},[e._v("\n              -\n            ")]),e._v(" "),t("h6",{staticStyle:{"margin-top":"16px","margin-left":"12px","margin-right":"3px"}},[e._v("\n              Infant ("+e._s(e.infant)+")\n            ")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary ml-3 mt-2",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.add2()}}},[e._v("\n              +\n            ")])])])])]):e._e(),e._v(" "),0==e.step?t("div",{staticClass:"coln"},[t("h4",{staticClass:"text-center",staticStyle:{"margin-top":"4rem"}},[e._v("BOOKING SUMMARY")]),e._v(" "),t("div",{staticClass:"boxes"},[t("div",{staticClass:"lines"},[t("i",{staticClass:"fas fa-calendar-check"}),e._v(" "),t("h6",{staticStyle:{"margin-left":"8px","margin-top":"6px"}},[e._v("\n            "+e._s(e.selectedDay?e.selectedDay:"Please Select Date")+"\n          ")])]),e._v(" "),t("div",{staticClass:"lines"},[t("i",{staticClass:"fas fa-clock"}),e._v(" "),t("h6",{staticStyle:{"margin-left":"6px","margin-top":"6px"}},[e._v("\n            "+e._s(e.selectedShift?e.selectedShift:"Please Select Shift")+"\n          ")])]),e._v(" "),t("div",{staticClass:"lines"},[t("i",{staticClass:"fas fa-couch"}),e._v(" "),t("h6",{staticStyle:{"margin-top":"6px"}},[e._v("\n            "+e._s(e.selectedDeck?"No Deck"==e.selectedDeck?"Dinner Deck":e.selectedDeck:"Please Select Deck")+"\n          ")])]),e._v(" "),t("div",{staticClass:"lines1",staticStyle:{"margin-top":"2rem"}},[t("h6",[e._v("Adult(s) : X "+e._s(e.adult.length))]),e._v(" "),t("h6",[e._v("Rs "+e._s(e.aTotal))])]),e._v(" "),t("div",{staticClass:"lines1 mb-2"},[t("h6",[e._v("Kid(s) : X "+e._s(e.kid.length))]),e._v(" "),t("h6",[e._v("Rs "+e._s(e.kTotal))])]),e._v(" "),t("div",{staticClass:"lines1 mb-2"},[t("h6",[e._v("Infant(s) : X "+e._s(e.infant))]),e._v(" "),t("h6",[e._v("Rs 0")])]),e._v(" "),t("div",{staticClass:"lines1",staticStyle:{"margin-block":"0.5rem"}},[t("h6",{staticClass:"ptext"},[e._v("GST")]),e._v(" "),t("h6",{staticClass:"ptext"},[[t("el-radio",{attrs:{label:"Yes"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("Yes")]),e._v(" "),t("el-radio",{attrs:{label:"No"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("No")])]],2)]),e._v(" "),"Yes"==e.radio?t("div",{staticClass:"lines1",staticStyle:{"margin-block":"0.5rem"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.gstno,expression:"gstno"}],attrs:{type:"text",placeholder:"GST No."},domProps:{value:e.gstno},on:{input:function(t){t.target.composing||(e.gstno=t.target.value)}}})]):e._e(),e._v(" "),"Yes"==e.radio?t("div",{staticClass:"lines1",staticStyle:{"margin-block":"0.5rem"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.billaddress,expression:"billaddress"}],attrs:{type:"text",placeholder:"Billing Address"},domProps:{value:e.billaddress},on:{input:function(t){t.target.composing||(e.billaddress=t.target.value)}}})]):e._e(),e._v(" "),t("div",{staticClass:"divider"}),e._v(" "),t("div",{staticClass:"lines1 mt-2"},[t("h6",[e._v("Total (Including GST)")]),e._v(" "),t("h6",[e._v("Rs "+e._s(e.kTotal+e.aTotal))])]),e._v(" "),t("div",{staticClass:"bt"},[t("button",{staticClass:"btn btn1",attrs:{type:"button"},on:{click:function(t){return e.save1()}}},[e._v("\n            Continue Booking ➜\n          ")])])])]):e._e(),e._v(" "),1==e.step?t("div",{staticClass:"book2"},[t("button",{staticClass:"btn btn-primary mb-3",attrs:{type:"button"},on:{click:function(t){e.step=0}}},[e._v("\n        Back\n      ")]),e._v(" "),t("div",{staticClass:"col1"},[t("p",{staticStyle:{color:"white","font-size":"16px"}},[e._v("Phone")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{type:"tel",pattern:"[0-9]{10}",placeholder:"Enter phone",maxlength:"10",required:""},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),e._v(" "),e._l(e.adult,(function(n,i){return t("div",{key:i,staticClass:"flexbap d-flex gap-2 mt-3"},[t("div",{staticClass:"col1"},[t("p",{staticStyle:{color:"white","font-size":"16px"}},[e._v("Adult ("+e._s(i+1)+")")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.adult[i].name,expression:"adult[i].name"}],attrs:{type:"text",placeholder:"Enter name",required:""},domProps:{value:e.adult[i].name},on:{input:function(t){t.target.composing||e.$set(e.adult[i],"name",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col2"},[t("p",{staticStyle:{color:"white","font-size":"16px"}},[e._v("Age")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.adult[i].age,expression:"adult[i].age"}],attrs:{type:"number",placeholder:"Enter Age",required:""},domProps:{value:e.adult[i].age},on:{input:function(t){t.target.composing||e.$set(e.adult[i],"age",t.target.value)}}})])])})),e._v(" "),e._l(e.kid,(function(n,i){return t("div",{key:i,staticClass:"flexbap d-flex gap-2 mt-3"},[t("div",{staticClass:"col1"},[t("p",{staticStyle:{color:"white","font-size":"16px"}},[e._v("Kid ("+e._s(i+1)+")")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.kid[i].name,expression:"kid[i].name"}],attrs:{type:"text",placeholder:"Enter name",required:""},domProps:{value:e.kid[i].name},on:{input:function(t){t.target.composing||e.$set(e.kid[i],"name",t.target.value)}}})]),e._v(" "),t("div",{staticClass:"col2"},[t("p",{staticStyle:{color:"white","font-size":"16px"}},[e._v("Age")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.kid[i].age,expression:"kid[i].age"}],attrs:{type:"number",placeholder:"Enter Age",required:""},domProps:{value:e.kid[i].age},on:{input:[function(t){t.target.composing||e.$set(e.kid[i],"age",t.target.value)},function(t){return e.checkAge(i)}]}})])])})),e._v(" "),"Dinner Cruise"==e.selectedShift?t("div",{staticClass:"coli"},[t("h6",{staticStyle:{"margin-block":"15px"}},[e._v("Food Preferrence")]),e._v(" "),t("div",{staticClass:"d-flex",staticStyle:{"align-items":"center","justify-content":"space-between"}},[t("button",{staticClass:"btn btn-sm btn-primary",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.mi()}}},[e._v("\n            -\n          ")]),e._v(" "),t("h6",[e._v("Veg ("+e._s(e.veg)+")")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.ad()}}},[e._v("\n            +\n          ")])]),e._v(" "),t("div",{staticClass:"d-flex",staticStyle:{"margin-top":"1rem","align-items":"center","justify-content":"space-between"}},[t("button",{staticClass:"btn btn-sm btn-primary",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.mi1()}}},[e._v("\n            -\n          ")]),e._v(" "),t("h6",{},[e._v("Non Veg ("+e._s(e.nonveg)+")")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.ad1()}}},[e._v("\n            +\n          ")])]),e._v(" "),t("div",{staticClass:"d-flex",staticStyle:{"margin-top":"1rem","margin-bottom":"1rem","align-items":"center","justify-content":"space-between"}},[t("button",{staticClass:"btn btn-sm btn-primary",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.mi2()}}},[e._v("\n            -\n          ")]),e._v(" "),t("h6",{},[e._v("Jain Food ("+e._s(e.other)+")")]),e._v(" "),t("button",{staticClass:"btn btn-sm btn-primary",staticStyle:{width:"2rem",height:"2rem"},attrs:{type:"button"},on:{click:function(t){return e.ad2()}}},[e._v("\n            +\n          ")])])]):e._e(),e._v(" "),t("div",{staticClass:"d-flex mt-4"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.yup11,expression:"yup11"}],staticClass:"inpp mr-2",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.yup11)?e._i(e.yup11,null)>-1:e.yup11},on:{change:function(t){var n=e.yup11,r=t.target,o=!!r.checked;if(Array.isArray(n)){var c=e._i(n,null);r.checked?c<0&&(e.yup11=n.concat([null])):c>-1&&(e.yup11=n.slice(0,c).concat(n.slice(c+1)))}else e.yup11=o}}}),e._v(" "),e._m(1)]),e._v(" "),0==e.isLoading?t("button",{staticClass:"btn btn-primary mt-4",attrs:{type:"button",disabled:0==e.yup11},on:{click:function(t){return e.save()}}},[e._v("\n        Proceed to Payment\n      ")]):t("button",{staticClass:"btn btn-primary mt-4 d-flex",attrs:{type:"button"}},[t("p",{staticClass:"spinner"}),e._v("\n           Proccessing.Please wait...\n      ")])],2):e._e()])])}),[function(){var e=this._self._c;return e("div",{staticClass:"box"},[e("h6",{staticStyle:{"font-size":"14px"}},[this._v("Select Cruise First!")])])},function(){var e=this,t=e._self._c;return t("p",[e._v("\n          I have read and agree to Alfresco Grand's\n          "),t("a",{staticStyle:{color:"white","text-decoration":"underline"},attrs:{href:"https://alfrescogrand.com/Termsandconditions",target:"_blank"}},[e._v("terms and conditions")])])}],!1,null,"44c2ee3f",null).exports}},k=Object(h.a)(v,(function(){var e=this._self._c;return e("div",[e("Booking")],1)}),[],!1,null,"60f64138",null);t.default=k.exports}}]);